name: Messenger-{player}
description: Mission Archipelago - The Messenger
requires:
  version: 0.6.4

The Messenger:
  # Game Options
  progression_balancing: normal

  accessibility:
    # Set rules for reachability of your items/locations.
    # 
    # **Full:** ensure everything can be reached and acquired.
    # 
    # **Minimal:** ensure what is needed to reach your goal can be acquired.
    # 
    # **Items:** ensure all logically relevant items can be acquired. Some items, such as keys, may be self-locking, and
    # some locations may be inaccessible.
    full: 50
    minimal: 0
    items: 0

  death_link: 'false' # When you die, everyone who enabled death link dies. Of course, the reverse is true too.
  logic_level: normal # The level of logic to use when determining what locations in your world are accessible.
    # Normal: Can require damage boosts, but otherwise approachable for someone who has beaten the game.
    # Hard: Expects more knowledge and tighter execution. Has leashing, normal clips and much tighter d-boosting in logic.

  shuffle_shards:
    # Whether mega shards should be item locations.
    # NOTE: These are set even because seal count can affect the probabilities
    'false': 1
    'true': 1

  limited_movement: 'false' # Removes either rope dart or wingsuit from the itempool. Forces logic to at least hard and accessibility to minimal.

  early_meditation:
    # Guarantees meditation will be found early
    'false': 2
    'true': 1

  available_portals:
    # Number of portals that are available from the start. Autumn Hills, Howling Grotto, and Glacial Peak are always available. If portal outputs are not randomized, Searing Crags will also be available.
    #
    # You can define additional values between the minimum and maximum values.
    # Minimum value is 3
    # Maximum value is 6
    random-range-high-3-6: 1

  shuffle_portals:
    # Whether the portals lead to random places.
    # Entering a portal from its vanilla area will always lead to HQ, and will unlock it if relevant.
    # Supports plando.
    # 
    # None: Portals will take you where they're supposed to.
    # Shops: Portals can lead to any area except Music Box and Elemental Skylands, with each portal output guaranteed to not overlap with another portal's. Will only put you at a portal or a shop.
    # Checkpoints: Like Shops except checkpoints without shops are also valid drop points.
    # Anywhere: Like Checkpoints except it's possible for multiple portals to output to the same map.
    none: 32
    shops: 8
    checkpoints: 2
    anywhere: 1

  shuffle_transitions:
    # Whether the transitions between the levels should be randomized.
    # Supports plando.
    # 
    # None: Level transitions lead where they should.
    # Coupled: Returning through a transition will take you from whence you came.
    # Decoupled: Any level transition can take you to any other level transition.
    none: 1
    coupled: 0
    decoupled: 0

  goal:
    # Requirement to finish the game. To win with the power seal hunt goal, you must enter the Music Box through the shop chest.
    open_music_box: 2
    power_seal_hunt: 1

  music_box: 'false' # Whether the music box gauntlet needs to be done.

  notes_needed:
    # How many notes are needed to access the Music Box.
    #
    # You can define additional values between the minimum and maximum values.
    # Minimum value is 1
    # Maximum value is 6
    random-range-high-1-6: 1

  total_seal_range:
    # Determines how total_seals is calculated
    low: 1
    mid: 4
    high: 2

  total_seals:
    # Total seals in the pool if set to total_seal_range = mid (others set in triggers) (1-85, default 45)
    random-range-middle-25-64: 4

  percent_seals_required:
    # Percentage of total seals required to open the shop chest.
    #
    # You can define additional values between the minimum and maximum values.
    # Minimum value is 10
    # Maximum value is 100
    # Default is 100
    random-range-high-10-50: 1
    random-range-high-51-80: 2
    random-range-high-81-100: 4

  traps:
    # Whether traps should be included in the itempool.
    'false': 2
    'true': 1

  shop_price:
    # Percentage modifier for shuffled item prices in shops
    #
    # You can define additional values between the minimum and maximum values.
    # Minimum value is 25
    # Maximum value is 400
    # Default is 100
    random-range-high-25-49: 4
    random-range-high-50-74: 8
    random-range-middle-75-124: 16
    random-range-low-125-200: 2
    random-range-low-201-400: 1

  shop_price_plan:
    # Plan specific prices on shop slots. Supports weighting
    {}

  portal_plando:
    # Plando connections to be used with portal shuffle. Direction is ignored.
    # List of valid connections can be found here: https://github.com/ArchipelagoMW/Archipelago/blob/main/worlds/messenger/portals.py#L12.
    # The entering Portal should *not* have "Portal" appended.
    # For the exits, those in checkpoints and shops should just be the name of the spot, while portals should have " Portal" at the end.
    # Example:
    # - entrance: Riviere Turquoise
    #   exit: Wingsuit
    # - entrance: Sunken Shrine
    #   exit: Sunny Day
    # - entrance: Searing Crags
    #   exit: Glacial Peak Portal
    []

  plando_connections:
    # Plando connections to be used with transition shuffle.
    # List of valid connections can be found at https://github.com/ArchipelagoMW/Archipelago/blob/main/worlds/messenger/connections.py#L641.
    # Dictionary keys (left) are entrances and values (right) are exits. If transition shuffle is on coupled all plando
    # connections will be coupled. If on decoupled, "entrance" and "exit" will be treated the same, simply making the
    # plando connection one-way from entrance to exit.
    # Example:
    # - entrance: Searing Crags - Top
    #   exit: Dark Cave - Right
    #   direction: both
    []

  # Item & Location Options
  local_items:
    # Forces these items to be in their native world.
    [
      'Key of Chaos',
      'Key of Hope',
      'Key of Courage',
      'Key of Love',
      'Key of Symbiosis',
      'Key of Strength'
    ]

  non_local_items:
    # Forces these items to be outside their native world.
    []

  start_inventory:
    # Start with these items and don't place them in the world.
    # 
    # The game decides what the replacement items will be.
    {}

  start_hints:
    # Start with these item's locations prefilled into the ``!hint`` command.
    []

  start_location_hints:
    # Start with these locations and their item prefilled into the ``!hint`` command.
    []

  exclude_locations:
    # Prevent these locations from having an important item.
    []

  priority_locations:
    # Prevent these locations from having an unimportant item.
    []

  item_links:
    # Share part of your item pool with other players.
    []

  plando_items:
    # Generic items plando.
    []

  triggers:

  # if total_seals is low, don't include shards to make them faster to find
  - option_category: The Messenger
    option_name: total_seal_range
    option_result: low
    options:
      The Messenger:
        total_seals: random-range-high-1-19
        shuffle_shards: 'false'
  # if total_seals is high, include shards to ensure enough locations
  - option_category: The Messenger
    option_name: total_seal_range
    option_result: high
    options:
      The Messenger:
        total_seals: random-range-low-65-85
        shuffle_shards: 'true'